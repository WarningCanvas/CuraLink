{"ast":null,"code":"const Database = require('./database');\nconst DatabaseServices = require('./services');\nlet dbInstance = null;\nlet servicesInstance = null;\nasync function initializeDatabase() {\n  try {\n    if (!dbInstance) {\n      dbInstance = new Database();\n      await dbInstance.initialize();\n\n      // Insert default data on first run\n      await dbInstance.insertDefaultData();\n      servicesInstance = new DatabaseServices(dbInstance);\n      console.log('CuraLink database ready');\n    }\n    return servicesInstance;\n  } catch (error) {\n    console.error('Failed to initialize database:', error);\n    throw error;\n  }\n}\nfunction getDatabase() {\n  if (!dbInstance) {\n    throw new Error('Database not initialized. Call initializeDatabase() first.');\n  }\n  return dbInstance;\n}\nfunction getServices() {\n  if (!servicesInstance) {\n    throw new Error('Database services not initialized. Call initializeDatabase() first.');\n  }\n  return servicesInstance;\n}\nasync function closeDatabase() {\n  if (dbInstance) {\n    await dbInstance.close();\n    dbInstance = null;\n    servicesInstance = null;\n  }\n}\nmodule.exports = {\n  initializeDatabase,\n  getDatabase,\n  getServices,\n  closeDatabase\n};","map":{"version":3,"names":["Database","require","DatabaseServices","dbInstance","servicesInstance","initializeDatabase","initialize","insertDefaultData","console","log","error","getDatabase","Error","getServices","closeDatabase","close","module","exports"],"sources":["L:/CuraLink/src/database/index.js"],"sourcesContent":["const Database = require('./database');\r\nconst DatabaseServices = require('./services');\r\n\r\nlet dbInstance = null;\r\nlet servicesInstance = null;\r\n\r\nasync function initializeDatabase() {\r\n  try {\r\n    if (!dbInstance) {\r\n      dbInstance = new Database();\r\n      await dbInstance.initialize();\r\n      \r\n      // Insert default data on first run\r\n      await dbInstance.insertDefaultData();\r\n      \r\n      servicesInstance = new DatabaseServices(dbInstance);\r\n      console.log('CuraLink database ready');\r\n    }\r\n    \r\n    return servicesInstance;\r\n  } catch (error) {\r\n    console.error('Failed to initialize database:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nfunction getDatabase() {\r\n  if (!dbInstance) {\r\n    throw new Error('Database not initialized. Call initializeDatabase() first.');\r\n  }\r\n  return dbInstance;\r\n}\r\n\r\nfunction getServices() {\r\n  if (!servicesInstance) {\r\n    throw new Error('Database services not initialized. Call initializeDatabase() first.');\r\n  }\r\n  return servicesInstance;\r\n}\r\n\r\nasync function closeDatabase() {\r\n  if (dbInstance) {\r\n    await dbInstance.close();\r\n    dbInstance = null;\r\n    servicesInstance = null;\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  initializeDatabase,\r\n  getDatabase,\r\n  getServices,\r\n  closeDatabase\r\n};"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,YAAY,CAAC;AACtC,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,YAAY,CAAC;AAE9C,IAAIE,UAAU,GAAG,IAAI;AACrB,IAAIC,gBAAgB,GAAG,IAAI;AAE3B,eAAeC,kBAAkBA,CAAA,EAAG;EAClC,IAAI;IACF,IAAI,CAACF,UAAU,EAAE;MACfA,UAAU,GAAG,IAAIH,QAAQ,CAAC,CAAC;MAC3B,MAAMG,UAAU,CAACG,UAAU,CAAC,CAAC;;MAE7B;MACA,MAAMH,UAAU,CAACI,iBAAiB,CAAC,CAAC;MAEpCH,gBAAgB,GAAG,IAAIF,gBAAgB,CAACC,UAAU,CAAC;MACnDK,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACxC;IAEA,OAAOL,gBAAgB;EACzB,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,MAAMA,KAAK;EACb;AACF;AAEA,SAASC,WAAWA,CAAA,EAAG;EACrB,IAAI,CAACR,UAAU,EAAE;IACf,MAAM,IAAIS,KAAK,CAAC,4DAA4D,CAAC;EAC/E;EACA,OAAOT,UAAU;AACnB;AAEA,SAASU,WAAWA,CAAA,EAAG;EACrB,IAAI,CAACT,gBAAgB,EAAE;IACrB,MAAM,IAAIQ,KAAK,CAAC,qEAAqE,CAAC;EACxF;EACA,OAAOR,gBAAgB;AACzB;AAEA,eAAeU,aAAaA,CAAA,EAAG;EAC7B,IAAIX,UAAU,EAAE;IACd,MAAMA,UAAU,CAACY,KAAK,CAAC,CAAC;IACxBZ,UAAU,GAAG,IAAI;IACjBC,gBAAgB,GAAG,IAAI;EACzB;AACF;AAEAY,MAAM,CAACC,OAAO,GAAG;EACfZ,kBAAkB;EAClBM,WAAW;EACXE,WAAW;EACXC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}