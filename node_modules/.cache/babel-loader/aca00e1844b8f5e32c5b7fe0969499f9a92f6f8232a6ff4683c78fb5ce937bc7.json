{"ast":null,"code":"const sqlite3 = require('sqlite3').verbose();\nconst path = require('path');\nconst fs = require('fs');\nconst {\n  v4: uuidv4\n} = require('uuid');\nclass Database {\n  constructor() {\n    this.db = null;\n    this.dbPath = this.getDatabasePath();\n  }\n  getDatabasePath() {\n    // Get app data directory based on platform\n    const os = require('os');\n    let appDataDir;\n    switch (process.platform) {\n      case 'win32':\n        appDataDir = path.join(os.homedir(), 'AppData', 'Roaming', 'CuraLink');\n        break;\n      case 'darwin':\n        appDataDir = path.join(os.homedir(), 'Library', 'Application Support', 'CuraLink');\n        break;\n      default:\n        appDataDir = path.join(os.homedir(), '.curalink');\n    }\n\n    // Ensure directory exists\n    if (!fs.existsSync(appDataDir)) {\n      fs.mkdirSync(appDataDir, {\n        recursive: true\n      });\n    }\n    return path.join(appDataDir, 'app-data.db');\n  }\n  async connect() {\n    return new Promise((resolve, reject) => {\n      this.db = new sqlite3.Database(this.dbPath, err => {\n        if (err) {\n          console.error('Error opening database:', err);\n          reject(err);\n        } else {\n          console.log('Connected to SQLite database at:', this.dbPath);\n          resolve();\n        }\n      });\n    });\n  }\n  async initialize() {\n    try {\n      await this.connect();\n      await this.createTables();\n      await this.runMigrations();\n      await this.initializeSettings();\n      console.log('Database initialized successfully');\n    } catch (error) {\n      console.error('Database initialization failed:', error);\n      throw error;\n    }\n  }\n  async createTables() {\n    const tables = [\n    // Migration tracking table\n    `CREATE TABLE IF NOT EXISTS migrations (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        version TEXT UNIQUE NOT NULL,\n        applied_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )`,\n    // Settings table\n    `CREATE TABLE IF NOT EXISTS settings (\n        key TEXT PRIMARY KEY,\n        value TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )`,\n    // Contacts table\n    `CREATE TABLE IF NOT EXISTS contacts (\n        id TEXT PRIMARY KEY,\n        name TEXT NOT NULL,\n        phone TEXT,\n        email TEXT,\n        organization TEXT,\n        tags TEXT DEFAULT '[]',\n        status TEXT DEFAULT 'Active',\n        notes TEXT,\n        avatar_path TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )`,\n    // Message templates table\n    `CREATE TABLE IF NOT EXISTS templates (\n        id TEXT PRIMARY KEY,\n        title TEXT NOT NULL,\n        content TEXT NOT NULL,\n        variables TEXT DEFAULT '[]',\n        category TEXT DEFAULT 'general',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )`,\n    // Message history table\n    `CREATE TABLE IF NOT EXISTS message_history (\n        id TEXT PRIMARY KEY,\n        contact_id TEXT NOT NULL,\n        message_content TEXT NOT NULL,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        template_id TEXT,\n        sent_via TEXT DEFAULT 'whatsapp',\n        send_status TEXT DEFAULT 'sent',\n        metadata TEXT DEFAULT '{}',\n        FOREIGN KEY (contact_id) REFERENCES contacts (id) ON DELETE CASCADE,\n        FOREIGN KEY (template_id) REFERENCES templates (id) ON DELETE SET NULL\n      )`];\n    for (const tableSQL of tables) {\n      await this.run(tableSQL);\n    }\n\n    // Create indexes for better performance\n    const indexes = ['CREATE INDEX IF NOT EXISTS idx_contacts_status ON contacts(status)', 'CREATE INDEX IF NOT EXISTS idx_contacts_name ON contacts(name)', 'CREATE INDEX IF NOT EXISTS idx_message_history_contact ON message_history(contact_id)', 'CREATE INDEX IF NOT EXISTS idx_message_history_timestamp ON message_history(timestamp)', 'CREATE INDEX IF NOT EXISTS idx_templates_category ON templates(category)'];\n    for (const indexSQL of indexes) {\n      await this.run(indexSQL);\n    }\n  }\n  async runMigrations() {\n    const migrations = [{\n      version: '1.0.0',\n      description: 'Initial schema',\n      sql: [] // Already created in createTables\n    }];\n    for (const migration of migrations) {\n      const exists = await this.get('SELECT version FROM migrations WHERE version = ?', [migration.version]);\n      if (!exists) {\n        console.log(`Running migration: ${migration.version} - ${migration.description}`);\n        for (const sql of migration.sql) {\n          await this.run(sql);\n        }\n        await this.run('INSERT INTO migrations (version) VALUES (?)', [migration.version]);\n      }\n    }\n  }\n  async initializeSettings() {\n    const defaultSettings = {\n      app_version: '1.0.0',\n      schema_version: '1.0.0',\n      user_name: 'Dr. Jane Smith',\n      user_email: 'jane.smith@curalink.com',\n      organization: 'Smith Medical Clinic',\n      dark_mode: 'true',\n      email_notifications: 'true',\n      event_reminders: 'true'\n    };\n    for (const [key, value] of Object.entries(defaultSettings)) {\n      const exists = await this.get('SELECT key FROM settings WHERE key = ?', [key]);\n      if (!exists) {\n        await this.run('INSERT INTO settings (key, value) VALUES (?, ?)', [key, value]);\n      }\n    }\n  }\n  async insertDefaultData() {\n    // Insert default message templates\n    const defaultTemplates = [{\n      id: uuidv4(),\n      title: 'Appointment Reminder',\n      content: 'Hi {ClientName}, this is a friendly reminder about your appointment scheduled for {Date} at {Time}. Please reply to confirm or let us know if you need to reschedule. Looking forward to seeing you!',\n      variables: JSON.stringify(['ClientName', 'Date', 'Time']),\n      category: 'appointment'\n    }, {\n      id: uuidv4(),\n      title: 'Follow-up Care',\n      content: 'Hello {ClientName}, we hope you\\'re doing well! This is a follow-up message regarding your recent visit. Please don\\'t hesitate to reach out if you have any questions or concerns.',\n      variables: JSON.stringify(['ClientName']),\n      category: 'followup'\n    }, {\n      id: uuidv4(),\n      title: 'Birthday Wishes',\n      content: 'Happy Birthday, {ClientName}! ðŸŽ‰ Wishing you a wonderful day filled with joy and celebration. Thank you for being a valued client. We hope this year brings you health and happiness!',\n      variables: JSON.stringify(['ClientName']),\n      category: 'birthday'\n    }, {\n      id: uuidv4(),\n      title: 'Welcome New Client',\n      content: 'Welcome to {Organization}, {ClientName}! We\\'re thrilled to have you with us. Our team is dedicated to providing you with exceptional care and service. Please feel free to reach out if you have any questions.',\n      variables: JSON.stringify(['Organization', 'ClientName']),\n      category: 'welcome'\n    }];\n    for (const template of defaultTemplates) {\n      const exists = await this.get('SELECT id FROM templates WHERE title = ?', [template.title]);\n      if (!exists) {\n        await this.run('INSERT INTO templates (id, title, content, variables, category) VALUES (?, ?, ?, ?, ?)', [template.id, template.title, template.content, template.variables, template.category]);\n      }\n    }\n\n    // Insert sample contacts\n    const sampleContacts = [{\n      id: uuidv4(),\n      name: 'Sarah Johnson',\n      phone: '1234567890',\n      email: 'sarah.johnson@email.com',\n      organization: 'Self',\n      status: 'Active',\n      tags: JSON.stringify(['Patient'])\n    }, {\n      id: uuidv4(),\n      name: 'Michael Chen',\n      phone: '1234567891',\n      email: 'michael.chen@email.com',\n      organization: 'Tech Corp',\n      status: 'Active',\n      tags: JSON.stringify(['Patient'])\n    }, {\n      id: uuidv4(),\n      name: 'Emily Rodriguez',\n      phone: '1234567892',\n      email: 'emily.rodriguez@email.com',\n      organization: 'Design Studio',\n      status: 'Patient',\n      tags: JSON.stringify(['Patient', 'Referral'])\n    }, {\n      id: uuidv4(),\n      name: 'David Thompson',\n      phone: '1234567893',\n      email: 'david.thompson@hospital.com',\n      organization: 'City Hospital',\n      status: 'Doctor',\n      tags: JSON.stringify(['Doctor', 'Referral'])\n    }];\n    for (const contact of sampleContacts) {\n      const exists = await this.get('SELECT id FROM contacts WHERE name = ?', [contact.name]);\n      if (!exists) {\n        await this.run('INSERT INTO contacts (id, name, phone, email, organization, status, tags) VALUES (?, ?, ?, ?, ?, ?, ?)', [contact.id, contact.name, contact.phone, contact.email, contact.organization, contact.status, contact.tags]);\n      }\n    }\n  }\n\n  // Helper methods for database operations\n  run(sql, params = []) {\n    return new Promise((resolve, reject) => {\n      this.db.run(sql, params, function (err) {\n        if (err) {\n          reject(err);\n        } else {\n          resolve({\n            id: this.lastID,\n            changes: this.changes\n          });\n        }\n      });\n    });\n  }\n  get(sql, params = []) {\n    return new Promise((resolve, reject) => {\n      this.db.get(sql, params, (err, row) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(row);\n        }\n      });\n    });\n  }\n  all(sql, params = []) {\n    return new Promise((resolve, reject) => {\n      this.db.all(sql, params, (err, rows) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(rows);\n        }\n      });\n    });\n  }\n  close() {\n    return new Promise((resolve, reject) => {\n      if (this.db) {\n        this.db.close(err => {\n          if (err) {\n            reject(err);\n          } else {\n            console.log('Database connection closed');\n            resolve();\n          }\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n}\nmodule.exports = Database;","map":{"version":3,"names":["sqlite3","require","verbose","path","fs","v4","uuidv4","Database","constructor","db","dbPath","getDatabasePath","os","appDataDir","process","platform","join","homedir","existsSync","mkdirSync","recursive","connect","Promise","resolve","reject","err","console","error","log","initialize","createTables","runMigrations","initializeSettings","tables","tableSQL","run","indexes","indexSQL","migrations","version","description","sql","migration","exists","get","defaultSettings","app_version","schema_version","user_name","user_email","organization","dark_mode","email_notifications","event_reminders","key","value","Object","entries","insertDefaultData","defaultTemplates","id","title","content","variables","JSON","stringify","category","template","sampleContacts","name","phone","email","status","tags","contact","params","lastID","changes","row","all","rows","close","module","exports"],"sources":["L:/CuraLink/src/database/database.js"],"sourcesContent":["const sqlite3 = require('sqlite3').verbose();\r\nconst path = require('path');\r\nconst fs = require('fs');\r\nconst { v4: uuidv4 } = require('uuid');\r\n\r\nclass Database {\r\n  constructor() {\r\n    this.db = null;\r\n    this.dbPath = this.getDatabasePath();\r\n  }\r\n\r\n  getDatabasePath() {\r\n    // Get app data directory based on platform\r\n    const os = require('os');\r\n    let appDataDir;\r\n    \r\n    switch (process.platform) {\r\n      case 'win32':\r\n        appDataDir = path.join(os.homedir(), 'AppData', 'Roaming', 'CuraLink');\r\n        break;\r\n      case 'darwin':\r\n        appDataDir = path.join(os.homedir(), 'Library', 'Application Support', 'CuraLink');\r\n        break;\r\n      default:\r\n        appDataDir = path.join(os.homedir(), '.curalink');\r\n    }\r\n\r\n    // Ensure directory exists\r\n    if (!fs.existsSync(appDataDir)) {\r\n      fs.mkdirSync(appDataDir, { recursive: true });\r\n    }\r\n\r\n    return path.join(appDataDir, 'app-data.db');\r\n  }\r\n\r\n  async connect() {\r\n    return new Promise((resolve, reject) => {\r\n      this.db = new sqlite3.Database(this.dbPath, (err) => {\r\n        if (err) {\r\n          console.error('Error opening database:', err);\r\n          reject(err);\r\n        } else {\r\n          console.log('Connected to SQLite database at:', this.dbPath);\r\n          resolve();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async initialize() {\r\n    try {\r\n      await this.connect();\r\n      await this.createTables();\r\n      await this.runMigrations();\r\n      await this.initializeSettings();\r\n      console.log('Database initialized successfully');\r\n    } catch (error) {\r\n      console.error('Database initialization failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async createTables() {\r\n    const tables = [\r\n      // Migration tracking table\r\n      `CREATE TABLE IF NOT EXISTS migrations (\r\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n        version TEXT UNIQUE NOT NULL,\r\n        applied_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n      )`,\r\n\r\n      // Settings table\r\n      `CREATE TABLE IF NOT EXISTS settings (\r\n        key TEXT PRIMARY KEY,\r\n        value TEXT NOT NULL,\r\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n      )`,\r\n\r\n      // Contacts table\r\n      `CREATE TABLE IF NOT EXISTS contacts (\r\n        id TEXT PRIMARY KEY,\r\n        name TEXT NOT NULL,\r\n        phone TEXT,\r\n        email TEXT,\r\n        organization TEXT,\r\n        tags TEXT DEFAULT '[]',\r\n        status TEXT DEFAULT 'Active',\r\n        notes TEXT,\r\n        avatar_path TEXT,\r\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n      )`,\r\n\r\n      // Message templates table\r\n      `CREATE TABLE IF NOT EXISTS templates (\r\n        id TEXT PRIMARY KEY,\r\n        title TEXT NOT NULL,\r\n        content TEXT NOT NULL,\r\n        variables TEXT DEFAULT '[]',\r\n        category TEXT DEFAULT 'general',\r\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n      )`,\r\n\r\n      // Message history table\r\n      `CREATE TABLE IF NOT EXISTS message_history (\r\n        id TEXT PRIMARY KEY,\r\n        contact_id TEXT NOT NULL,\r\n        message_content TEXT NOT NULL,\r\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n        template_id TEXT,\r\n        sent_via TEXT DEFAULT 'whatsapp',\r\n        send_status TEXT DEFAULT 'sent',\r\n        metadata TEXT DEFAULT '{}',\r\n        FOREIGN KEY (contact_id) REFERENCES contacts (id) ON DELETE CASCADE,\r\n        FOREIGN KEY (template_id) REFERENCES templates (id) ON DELETE SET NULL\r\n      )`\r\n    ];\r\n\r\n    for (const tableSQL of tables) {\r\n      await this.run(tableSQL);\r\n    }\r\n\r\n    // Create indexes for better performance\r\n    const indexes = [\r\n      'CREATE INDEX IF NOT EXISTS idx_contacts_status ON contacts(status)',\r\n      'CREATE INDEX IF NOT EXISTS idx_contacts_name ON contacts(name)',\r\n      'CREATE INDEX IF NOT EXISTS idx_message_history_contact ON message_history(contact_id)',\r\n      'CREATE INDEX IF NOT EXISTS idx_message_history_timestamp ON message_history(timestamp)',\r\n      'CREATE INDEX IF NOT EXISTS idx_templates_category ON templates(category)'\r\n    ];\r\n\r\n    for (const indexSQL of indexes) {\r\n      await this.run(indexSQL);\r\n    }\r\n  }\r\n\r\n  async runMigrations() {\r\n    const migrations = [\r\n      {\r\n        version: '1.0.0',\r\n        description: 'Initial schema',\r\n        sql: [] // Already created in createTables\r\n      }\r\n    ];\r\n\r\n    for (const migration of migrations) {\r\n      const exists = await this.get(\r\n        'SELECT version FROM migrations WHERE version = ?',\r\n        [migration.version]\r\n      );\r\n\r\n      if (!exists) {\r\n        console.log(`Running migration: ${migration.version} - ${migration.description}`);\r\n        \r\n        for (const sql of migration.sql) {\r\n          await this.run(sql);\r\n        }\r\n\r\n        await this.run(\r\n          'INSERT INTO migrations (version) VALUES (?)',\r\n          [migration.version]\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  async initializeSettings() {\r\n    const defaultSettings = {\r\n      app_version: '1.0.0',\r\n      schema_version: '1.0.0',\r\n      user_name: 'Dr. Jane Smith',\r\n      user_email: 'jane.smith@curalink.com',\r\n      organization: 'Smith Medical Clinic',\r\n      dark_mode: 'true',\r\n      email_notifications: 'true',\r\n      event_reminders: 'true'\r\n    };\r\n\r\n    for (const [key, value] of Object.entries(defaultSettings)) {\r\n      const exists = await this.get('SELECT key FROM settings WHERE key = ?', [key]);\r\n      if (!exists) {\r\n        await this.run(\r\n          'INSERT INTO settings (key, value) VALUES (?, ?)',\r\n          [key, value]\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  async insertDefaultData() {\r\n    // Insert default message templates\r\n    const defaultTemplates = [\r\n      {\r\n        id: uuidv4(),\r\n        title: 'Appointment Reminder',\r\n        content: 'Hi {ClientName}, this is a friendly reminder about your appointment scheduled for {Date} at {Time}. Please reply to confirm or let us know if you need to reschedule. Looking forward to seeing you!',\r\n        variables: JSON.stringify(['ClientName', 'Date', 'Time']),\r\n        category: 'appointment'\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        title: 'Follow-up Care',\r\n        content: 'Hello {ClientName}, we hope you\\'re doing well! This is a follow-up message regarding your recent visit. Please don\\'t hesitate to reach out if you have any questions or concerns.',\r\n        variables: JSON.stringify(['ClientName']),\r\n        category: 'followup'\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        title: 'Birthday Wishes',\r\n        content: 'Happy Birthday, {ClientName}! ðŸŽ‰ Wishing you a wonderful day filled with joy and celebration. Thank you for being a valued client. We hope this year brings you health and happiness!',\r\n        variables: JSON.stringify(['ClientName']),\r\n        category: 'birthday'\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        title: 'Welcome New Client',\r\n        content: 'Welcome to {Organization}, {ClientName}! We\\'re thrilled to have you with us. Our team is dedicated to providing you with exceptional care and service. Please feel free to reach out if you have any questions.',\r\n        variables: JSON.stringify(['Organization', 'ClientName']),\r\n        category: 'welcome'\r\n      }\r\n    ];\r\n\r\n    for (const template of defaultTemplates) {\r\n      const exists = await this.get('SELECT id FROM templates WHERE title = ?', [template.title]);\r\n      if (!exists) {\r\n        await this.run(\r\n          'INSERT INTO templates (id, title, content, variables, category) VALUES (?, ?, ?, ?, ?)',\r\n          [template.id, template.title, template.content, template.variables, template.category]\r\n        );\r\n      }\r\n    }\r\n\r\n    // Insert sample contacts\r\n    const sampleContacts = [\r\n      {\r\n        id: uuidv4(),\r\n        name: 'Sarah Johnson',\r\n        phone: '1234567890',\r\n        email: 'sarah.johnson@email.com',\r\n        organization: 'Self',\r\n        status: 'Active',\r\n        tags: JSON.stringify(['Patient'])\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        name: 'Michael Chen',\r\n        phone: '1234567891',\r\n        email: 'michael.chen@email.com',\r\n        organization: 'Tech Corp',\r\n        status: 'Active',\r\n        tags: JSON.stringify(['Patient'])\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        name: 'Emily Rodriguez',\r\n        phone: '1234567892',\r\n        email: 'emily.rodriguez@email.com',\r\n        organization: 'Design Studio',\r\n        status: 'Patient',\r\n        tags: JSON.stringify(['Patient', 'Referral'])\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        name: 'David Thompson',\r\n        phone: '1234567893',\r\n        email: 'david.thompson@hospital.com',\r\n        organization: 'City Hospital',\r\n        status: 'Doctor',\r\n        tags: JSON.stringify(['Doctor', 'Referral'])\r\n      }\r\n    ];\r\n\r\n    for (const contact of sampleContacts) {\r\n      const exists = await this.get('SELECT id FROM contacts WHERE name = ?', [contact.name]);\r\n      if (!exists) {\r\n        await this.run(\r\n          'INSERT INTO contacts (id, name, phone, email, organization, status, tags) VALUES (?, ?, ?, ?, ?, ?, ?)',\r\n          [contact.id, contact.name, contact.phone, contact.email, contact.organization, contact.status, contact.tags]\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // Helper methods for database operations\r\n  run(sql, params = []) {\r\n    return new Promise((resolve, reject) => {\r\n      this.db.run(sql, params, function(err) {\r\n        if (err) {\r\n          reject(err);\r\n        } else {\r\n          resolve({ id: this.lastID, changes: this.changes });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  get(sql, params = []) {\r\n    return new Promise((resolve, reject) => {\r\n      this.db.get(sql, params, (err, row) => {\r\n        if (err) {\r\n          reject(err);\r\n        } else {\r\n          resolve(row);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  all(sql, params = []) {\r\n    return new Promise((resolve, reject) => {\r\n      this.db.all(sql, params, (err, rows) => {\r\n        if (err) {\r\n          reject(err);\r\n        } else {\r\n          resolve(rows);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  close() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.db) {\r\n        this.db.close((err) => {\r\n          if (err) {\r\n            reject(err);\r\n          } else {\r\n            console.log('Database connection closed');\r\n            resolve();\r\n          }\r\n        });\r\n      } else {\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = Database;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}